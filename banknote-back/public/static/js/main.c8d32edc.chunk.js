(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,a){e.exports=a.p+"static/media/rectangled_logo.20c10c04.png"},211:function(e,t,a){e.exports=a.p+"static/media/money.49c4b235.png"},229:function(e,t,a){e.exports=a(495)},234:function(e,t,a){},236:function(e,t,a){},495:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(9),l=a.n(c),o=(a(234),a(28)),s=a(29),i=a(31),u=a(30),m=a(32),d=(a(236),a(227)),p=a(359),h=a(516),f=a(496),g=a(10),E=a(289),y=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={current:"home",loggedUser:null},a.handleClick=function(e){a.setState({current:e.key})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"d-flex",style:{justifyContent:"space-between",outline:"2px solid #e8e8e8"}},r.a.createElement(f.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal"},r.a.createElement(f.a.Item,{key:"home"},r.a.createElement(E.a,{to:"/"},r.a.createElement(g.a,{type:"home"}),"Inicio"))),r.a.createElement(f.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal",style:{display:"flex"}},r.a.createElement(f.a.Item,{key:"login"},r.a.createElement(E.a,{to:"/login"},r.a.createElement(g.a,{type:"user"}),"Iniciar sesi\xf3n")),r.a.createElement(f.a.Item,{key:"register"},r.a.createElement(E.a,{to:"/signup"},r.a.createElement(g.a,{type:"form"}),"Registrarse")))))}}]),t}(n.Component),b=function(e){return r.a.createElement("div",null,r.a.createElement(y,null),e.children)},v=a(211),w=a.n(v),x=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){if(!JSON.parse(localStorage.getItem("user")))return this.setState({user:{},isAuth:!1});this.props.history.push("/dashboard")}},{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex jcc aic main-back"},r.a.createElement("div",{className:"slide",style:{fontSize:"3em"}},r.a.createElement("div",{className:"slogan"},r.a.createElement("h1",null,"Banknote"),r.a.createElement("p",null,"Todos tus gastos en el mismo lugar."),r.a.createElement("img",{src:w.a,alt:"money"})),r.a.createElement("div",{className:"c-form"},r.a.createElement("h3",null,"\xa1Tu cuenta en 5 minutos!"),r.a.createElement("p",null,r.a.createElement(g.a,{type:"check",style:{color:"#8d2434"}})," Administra tus cuentas"),r.a.createElement("p",null,r.a.createElement(g.a,{type:"check",style:{color:"#8d2434"}})," No olvides m\xe1s tus pagos"),r.a.createElement("p",null,r.a.createElement(g.a,{type:"check",style:{color:"#8d2434"}})," Administra tus cuentas"),r.a.createElement("p",null,r.a.createElement(g.a,{type:"check",style:{color:"#8d2434"}})," Administra tus cuentas"),r.a.createElement(E.a,{to:"/signup"},r.a.createElement("button",{className:"btn-r"},"\xa1Registrate ya!")))))}}]),t}(n.Component),k=a(503),j=a(508),N=a(111),O=k.a.Item,S=function(e){var t=e.squareLogo,a=e.handleInput,n=e.email,c=e.password,l=e.onLogin;return r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement(k.a,{style:{width:"500px",padding:8},onSubmit:l},r.a.createElement("div",{style:{width:"100%",height:"150px",backgroundImage:"url(".concat(t,")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),r.a.createElement(O,null,r.a.createElement(j.a,{prefix:r.a.createElement(g.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),name:"email",value:n,placeholder:"E-mail",onChange:a})),r.a.createElement(O,null,r.a.createElement(j.a,{type:"password",prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),name:"password",value:c,placeholder:"Contrase\xf1a",onChange:a})),r.a.createElement("section",{className:"d-flex fw aic jcc"},r.a.createElement(N.a,{htmlType:"submit",style:{width:"100%",margin:"8px 0"},type:"primary"},"Iniciar sesi\xf3n"),r.a.createElement("p",null,"\xbfNo tienes cuenta? ",r.a.createElement(E.a,{to:"/signup"},"Reg\xedstrate")))))},C=k.a.Item,I=function(e){var t=e.squareLogo,a=e.handleInput,n=e.username,c=e.email,l=e.password,o=e.onRegister;return r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement(k.a,{style:{width:"500px",padding:8},onSubmit:o},r.a.createElement("div",{style:{width:"100%",height:"150px",backgroundImage:"url(".concat(t,")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),r.a.createElement(C,null,r.a.createElement(j.a,{prefix:r.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),name:"username",value:n,placeholder:"Nombre de usuario",onChange:a})),r.a.createElement(C,null,r.a.createElement(j.a,{type:"email",prefix:r.a.createElement(g.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),name:"email",value:c,placeholder:"E-mail",onChange:a})),r.a.createElement(C,null,r.a.createElement(j.a,{type:"password",prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),name:"password",value:l,placeholder:"Contrase\xf1a",onChange:a})),r.a.createElement("section",{className:"d-flex fw aic jcc"},r.a.createElement(N.a,{style:{width:"100%",margin:"8px 0"},type:"primary",htmlType:"submit"},"Registrarse"),r.a.createElement("p",null,"\xbfYa tienes una cuenta? ",r.a.createElement(E.a,{to:"/login"},"Inicia sesi\xf3n")))))},M=a(161),_=a.n(M),D=a(36),L=a.n(D),A="https://sync.paybook.com/v1",Y="?api_key=dd891f88f7b38e9483e865780076459f",z="dd891f88f7b38e9483e865780076459f",P=function(e,t){return L.a.get("".concat(A,"/accounts?id_user=").concat(e,"&api_key=").concat(z,"&token=").concat(t)).then(function(e){return e}).catch(function(e){return e.response})},R=function(e,t){return L.a.get("".concat(A,"/transactions?id_credential=").concat(e,"&api_key=").concat(z,"&token=").concat(t)).then(function(e){return e}).catch(function(e){return e.response})},T="https://banknote.herokuapp.com/api",q=function(e){return L.a.post(T+"/login",e,{withCredentials:!0}).then(function(e){return 200===e.status?(t=e.data.id_user,L.a.post(A+"/sessions"+Y,{api_key:z,id_user:t}).then(function(e){return e})).then(function(t){var a=t.data.response.token;return e.data.token=a,e}):e;var t}).catch(function(e){return e.response})},B=function(e){return L.a.post(T+"/signup",e).then(function(e){if(201===e.status)return function(e){var t=e.email;return L.a.post(A+"/users"+Y,{name:t,api_key:z}).then(function(e){return e}).catch(function(e){return e.response})}(e.data).then(function(t){if(200===t.data.code)return function(e,t){return L.a.post(T+"/update/",{_id:e,id_user:t}).then(function(e){return console.log("updateUser:",e),e}).catch(function(e){return e.response})}(e.data._id,t.data.response.id_user).then(function(e){if(200===e.status)return e}).catch(function(e){return e.response})}).catch(function(e){return e.response})}).catch(function(e){return e.response})},F=function(){return L.a.get(T+"/logout").then(function(e){return e}).catch(function(e){return e.response})},J=a(497),W=a(498),$=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},isAuth:!1},a.onLogin=function(e){e.preventDefault();var t=a.state.user;q(t).then(function(e){200!==e.status?J.a.error({message:"\xa1Algo sali\xf3 mal!",description:e.data.message}):(localStorage.setItem("user",JSON.stringify(e.data)),W.a.success("\xa1Bienvenido! Iniciaste sesi\xf3n correctamente"),a.props.history.push("/dashboard"))}).catch(function(e){W.a.error("\xa1Algo sali\xf3 m\xe1l! ".concat(e))})},a.onRegister=function(e){e.preventDefault();var t=a.state.user;B(t).then(function(e){return 200!==e.status?W.a.error(e.data.message):(W.a.success("Usuario registrado, ahora puedes iniciar sesi\xf3n. \ud83e\udd19\ud83c\udffd"),t.password="",a.setState({user:t}),a.props.history.push("/login"))})},a.handleInput=function(e){var t=a.state.user;t[e.target.name]=e.target.value,a.setState({user:t})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){if(!JSON.parse(localStorage.getItem("user")))return this.setState({user:{},isAuth:!1});this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.props.location.pathname,t=this.state.user,a=this.handleInput,n=this.onLogin,c=this.onRegister;return r.a.createElement("div",{className:"d-flex fw jcc aic vh90"},"/login"===e?r.a.createElement(S,Object.assign({squareLogo:_.a,handleInput:a,onLogin:n},t)):r.a.createElement(I,Object.assign({squareLogo:_.a,handleInput:a,onRegister:c},t)))}}]),t}(n.Component),H=a(505),V=a(510),U=a(499),K=a(500),X=a(513),G=H.a.Meta,Z=V.a.Content,Q=V.a.Sider,ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},collapsed:!1},a.onCollapse=function(e){a.setState({collapsed:e})},a.onLogout=function(){F().then(function(e){200===e.status&&(W.a.info(e.data.message),localStorage.removeItem("user"),a.props.history.push("/"))})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("user"));if(!e)return W.a.warning("\xa1Ooops! Tienes que iniciar sesi\xf3n primero."),this.props.history.push("/");this.setState({user:e})}},{key:"render",value:function(){var e=this.state,t=e.collapsed,a=e.user,n=this.onCollapse,c=this.onLogout;return r.a.createElement("div",null,r.a.createElement(V.a,{style:{minHeight:"100vh"}},r.a.createElement(Q,{collapsible:!0,collapsed:t,onCollapse:n},r.a.createElement("div",{className:"logo"},r.a.createElement(H.a,null,r.a.createElement(G,{className:"d-flex aic",avatar:r.a.createElement(U.a,{src:a.photoURL?a.photoURL:"https://www.uic.mx/posgrados/files/2018/05/default-user.png"}),title:a.username}))),r.a.createElement(f.a,{theme:"dark",mode:"inline"},r.a.createElement(f.a.Item,{key:"dashboard"},r.a.createElement(K.a,{to:"/dashboard"},r.a.createElement(g.a,{type:"layout"}),r.a.createElement("span",null,"Dashboard"))),r.a.createElement(f.a.Item,{key:"accounts"},r.a.createElement(K.a,{to:"/accounts"},r.a.createElement(g.a,{type:"desktop"}),r.a.createElement("span",null,"Cuentas"))),r.a.createElement(f.a.Item,{key:"payments"},r.a.createElement(K.a,{to:"/payments"},r.a.createElement(g.a,{type:"dollar"}),r.a.createElement("span",null,"Pagos"))),r.a.createElement(f.a.Item,{key:"logout",onClick:c},r.a.createElement(g.a,{type:"logout"}),r.a.createElement("span",null,"Cerrar sesi\xf3n")))),r.a.createElement(V.a,null,r.a.createElement(Z,{style:{margin:"16px"}},r.a.createElement("div",{className:"layout-body",style:{background:"#fff",overflowY:"scroll"}},this.props.children)))))}}]),t}(n.Component),te=Object(X.a)(ee),ae=a(226),ne=a(506),re=a(512),ce=a(501),le=a(515),oe=a(514),se=function(e){var t=e.accounts;return r.a.createElement("div",null,r.a.createElement(oe.a,{itemLayout:"horizontal",dataSource:t,renderItem:function(e){return r.a.createElement(oe.a.Item,{actions:[r.a.createElement(E.a,{to:"/accounts/".concat(e.id_credential)},"Ver detalle")]},r.a.createElement(oe.a.Item.Meta,{avatar:r.a.createElement(U.a,{src:"https://www.paybook.com/s/".concat(e.site.avatar)}),title:"".concat(e.site.organization," | ").concat(e.site.name),description:r.a.createElement("div",null,r.a.createElement("h5",null,e.extra.owner?e.extra.owner:""),r.a.createElement("p",null,r.a.createElement("strong",null,"Saldo disponible: ")," ",r.a.createElement(le.a,{status:e.balance>1e3?"success":e.balance>500?"warning":"error"}),"$",e.balance," ",e.currency))}))}}))},ie=function(e){var t=e.account;return r.a.createElement("div",null,0===t.transactions.length?r.a.createElement("p",{style:{margin:"5 20",padding:5}},r.a.createElement("strong",null,"No hay movimientos")):r.a.createElement(oe.a,{itemLayout:"horizontal",dataSource:t.transactions.slice(0,5),renderItem:function(e){return r.a.createElement(oe.a.Item,{style:{margin:8}},r.a.createElement(oe.a.Item.Meta,{avatar:r.a.createElement(U.a,{src:"https://www.paybook.com/s/".concat(t.site.avatar)}),title:"".concat(e.description),description:r.a.createElement("div",null,e.extra&&e.extra.concept?r.a.createElement("h5",null,"Concepto: ",e.extra.concept):"",r.a.createElement("p",null,r.a.createElement("strong",{style:{color:e.amount>0?"green":"red"}},r.a.createElement("i",{className:"fas fa-money-bill-alt"})," ",e.amount," ",e.currency," "),"| ",r.a.createElement("i",{className:"fas fa-calendar-alt"})," ",e.dt_transaction))}))}}))},ue=a(12),me=a.n(ue),de=a(217),pe="https://banknote.herokuapp.com",he=function(e){return L.a.post("".concat(pe,"/payments/add"),e).then(function(e){return e}).catch(function(e){return e.response})},fe=function(e){return L.a.get("".concat(pe,"/payments/").concat(e._id)).then(function(e){return e}).catch(function(e){return e.response})},ge=function(e){return L.a.delete("".concat(pe,"/payments/delete/").concat(e)).then(function(e){return e}).catch(function(e){return e.response})},Ee=ne.a.Panel,ye={background:"#f7f7f7",borderRadius:4,marginBottom:24,border:0,overflow:"hidden"},be=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={accounts:[],allTransactions:[],charData:{labels:[],datasets:[{data:[],backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)"]}]},payments:[],isLoaded:!1,dataLoaded:!1,visible:!1,totalBalance:0,totalPayments:0},a.componentWillMount=function(){var e=a.state,t=e.accounts,n=e.allTransactions,r=e.charData,c=JSON.parse(localStorage.getItem("user"));r.labels=[me()().subtract(2,"month").startOf("month").format("MMMM"),me()().subtract(1,"month").startOf("month").format("MMMM"),me()().startOf("month").format("MMMM")];var l=c.id_user,o=c.token;P(l,o).then(function(e){e.data.response.map(function(e){return R(e.id_credential,c.token).then(function(l){l.data.response=l.data.response.map(function(e){return e.dt_transaction=me()(new Date(1e3*e.dt_transaction)).format("DD MMMM YYYY"),e}),e.transactions=l.data.response.reverse(),t.push(e),n.push.apply(n,Object(ae.a)(l.data.response)),a.setState({accounts:t,allTransactions:n,charData:r}),a.updateChartData(),fe(c).then(function(e){200===e.status&&a.setState({payments:e.data.payments,dataLoaded:!0})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})})}).catch(function(e){return console.log(e)}),setTimeout(function(){var e=a.state,t=e.payments,n=e.accounts,r=e.totalBalance,c=e.totalPayments;r=n.reduce(function(e,t){return e+t.balance},0),c=t.reduce(function(e,t){return e+t.monthly_pay},0),a.setState({totalBalance:r,totalPayments:c})},4e3)},a.updateChartData=function(){var e=a.state.allTransactions,t=Object.assign({},a.state.charData);t.labels.map(function(n){var r=[];if(e.length>0&&(r=e.filter(function(e){return-1!==e.dt_transaction.indexOf(n)})),r.length>0){var c=r.reduce(function(e,t){return t.amount<0?e+Math.abs(t.amount):e},0);t.datasets[0].data.push(Math.round(c)),3===t.datasets[0].data.length&&a.setState({charData:t,isLoaded:!0})}return n})},a.hide=function(){a.setState({visible:!1})},a.handleVisibleChange=function(e){a.setState({visible:e})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.accounts,a=e.charData,c=e.totalBalance,l=e.totalPayments;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{height:60,justifyContent:"space-between"},className:"d-flex aic"},r.a.createElement("div",{style:{paddingLeft:45,width:"400px"},className:"d-flex aic"},r.a.createElement(re.a,null,r.a.createElement(re.a.Item,null,r.a.createElement(g.a,{type:"schedule"}),r.a.createElement("span",null,r.a.createElement("strong",null,"Fecha: ")," ",me()().format("DD MMMM YYYY"))))),r.a.createElement("div",{style:{width:"500px",justifyContent:"space-around"},className:"d-flex"},r.a.createElement("div",null,r.a.createElement(ce.a,{content:r.a.createElement("p",null,"Tu saldo al final de mes ser\xe1 de: ",r.a.createElement("br",null)," ",r.a.createElement("strong",null,"$ ",c-l," MXN")," ",r.a.createElement("br",null),"El total de tus pagos de este mes es de: ",r.a.createElement("br",null)," ",r.a.createElement("strong",null,"$ ",l," MXN")," ",r.a.createElement("br",null)),title:"Saldos"},r.a.createElement("span",{className:"d-flex jcc aic"},r.a.createElement(g.a,{style:{fontSize:"26px",marginRight:10},type:"dollar"})," ",r.a.createElement("strong",null," Saldo total :  ",0===c?"Calculando..":r.a.createElement("span",{style:c<500?{color:"red"}:{color:"green"}},"$",c," MXN")," ")))),r.a.createElement("div",null,r.a.createElement(ce.a,{placement:"topLeft",content:r.a.createElement(E.a,{to:"/dashboard",onClick:this.hide},"Close"),title:"Notificaciones",trigger:"click",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},r.a.createElement(E.a,{to:"/dashboard",className:"d-flex jcc aic"},"Notificaciones ",r.a.createElement(le.a,{dot:!0},r.a.createElement(g.a,{style:{fontSize:"26px",marginLeft:10},type:"notification"}))))))),r.a.createElement("div",{className:"d-flex fw jcc aic"},r.a.createElement("div",{className:"left-side",style:{overflowY:"scroll"}},r.a.createElement("div",{className:"box"},r.a.createElement(ne.a,{bordered:!1,defaultActiveKey:["1"],accordion:!0},t.length>0?t.map(function(e,t){return r.a.createElement(Ee,{header:"Cuenta #".concat(t+1,": ").concat(e.site.organization),key:t+1,style:ye},r.a.createElement(ie,{account:e}),r.a.createElement("div",{className:"d-flex aic"},r.a.createElement(E.a,{to:"/accounts/".concat(e.id_credential)},r.a.createElement(N.a,null,"Ver todas las transacciones"))))}):"")),r.a.createElement("div",{className:"box"},r.a.createElement("div",{style:{padding:8}},r.a.createElement("h4",null,"Pagos recurrentes y metas: "),r.a.createElement("div",null,this.state.dataLoaded?r.a.createElement(oe.a,{itemLayout:"horizontal",dataSource:this.state.payments,renderItem:function(e){return r.a.createElement(oe.a.Item,null,r.a.createElement(oe.a.Item.Meta,{avatar:r.a.createElement(U.a,{size:32,src:"https://images.vexels.com/media/users/3/143188/isolated/preview/5f44f3160a09b51b4fa4634ecdff62dd-money-icon-by-vexels.png"}),title:r.a.createElement("a",{href:"https://ant.design"},e.paymentName),description:e.description}),r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement("div",{style:{textAlign:"center"}},0===e.month_count?r.a.createElement("span",null,"Pago recurrente (Hasta cancelar)"):r.a.createElement("span",null,"Pago diferido (",e.month_count," meses)"),r.a.createElement("br",null),r.a.createElement("span",{style:{margin:"auto"}},"$",e.monthly_pay," por mes."))))}}):r.a.createElement("div",{style:{height:"100%"},className:"d-flex jcc aic"},r.a.createElement("img",{style:{maxHeight:200},src:"https://www.tecmam.com.mx/images/icons/loading.gif",alt:"loading"}))),r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement(E.a,{to:"/payments"},r.a.createElement(N.a,{size:"large",type:"primary"},"Agregar pago recurrente.")))))),r.a.createElement("div",{className:"right-side"},r.a.createElement("div",{className:"box"},t.length>0?r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Cuentas disponibles: "),r.a.createElement(se,{accounts:t}),r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement("a",{href:"/accounts"},r.a.createElement(N.a,{type:"primary"},"Agregar cuenta")))):r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"}},"No hay cuentas agregadas"),r.a.createElement("a",{href:"/accounts"},r.a.createElement(N.a,{size:"large",type:"primary"},"Agregar cuenta")))),r.a.createElement("div",{className:"box"},this.state.isLoaded?r.a.createElement("div",{style:{height:"100%"},className:"d-flex jcc aic"},r.a.createElement(de.a,{data:a,options:{title:{display:!0,text:"Gastos de los \xfaltimos 3 meses",fontSize:25},legend:{display:!1,position:"right"},responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})):r.a.createElement("div",{style:{height:"100%"},className:"d-flex jcc aic"},r.a.createElement("img",{style:{maxHeight:200},src:"https://www.tecmam.com.mx/images/icons/loading.gif",alt:"loading"}))))))}}]),t}(n.Component),ve=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){var e=JSON.parse(localStorage.getItem("user")),t=document.createElement("script");t.type="text/javascript",t.async=!0,t.innerHTML='\n        !function (w, d, s, id, r) {\n            w[r] = {};\n            w[r] = w[r] || function () { w[r].q = w[r].q || [].push(arguments) };\n            var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? "http" : "https";\n            if (!d.getElementById(id)) {\n                js = d.createElement(s);\n                js.id = id;\n                js.src = p + "://www.paybook.com/sync/widget.js";\n                fjs.parentNode.insertBefore(js, fjs);\n            }\n        }(window, document, "script", "sync-widget", "syncWidget");\n        syncWidget.options = { token: "'.concat(e.token,'", baseDiv: "sync_container", theme: "ligth"};\n                    '),document.body.appendChild(t)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement("div",{id:"sync_container",className:"vh",style:{width:"60vw",margin:8,padding:8}})))}}]),t}(n.Component),we=a(502),xe=[{title:"Referencia",dataIndex:"reference"},{title:"Description",dataIndex:"description"},{title:"Cantidad",dataIndex:"amount",render:function(e){return r.a.createElement("strong",{style:{color:e>0?"green":"red"}},"$",e)}},{title:"Fecha",dataIndex:"dt_transaction",render:function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("strong",null,me()(new Date(1e3*e)).format("DD-MMMM-YYYY")))}}],ke=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={transactions:[]},a.componentWillMount=function(){var e=JSON.parse(localStorage.getItem("user")),t=a.props.match.params.id,n=e.token;R(t,n).then(function(e){e=e.data.response.reverse(),a.setState({transactions:e})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.state.transactions);var e=this.state.transactions;return r.a.createElement(n.Fragment,null,r.a.createElement("h3",null,"Detalles de la cuenta: "),r.a.createElement("p",null,"Aqu\xed podr\xe1s ver todas las transacciones disponibles de tu cuenta."),r.a.createElement("div",{className:"d-flex layout-body"},r.a.createElement("div",{style:{width:"100%",padding:8}},r.a.createElement(we.a,{bordered:!0,columns:xe,dataSource:e,rowKey:function(e){return e.id_transaction}}))))}}]),t}(n.Component),je=a(208),Ne=a(507),Oe=a(504),Se=a(509),Ce=H.a.Meta,Ie=k.a.Item,Me=je.a.Option,_e=je.a.OptGroup,De=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,payments:{},dataLoaded:!1},a.componentWillMount=function(){var e=JSON.parse(localStorage.getItem("user"));fe(e).then(function(e){console.log(e),200===e.status&&a.setState({payments:e.data.payments,dataLoaded:!0})}).catch(function(e){return console.log(e)})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){t.end_date=t.payday.add(t.month_count,"months").toDate(),t.payday=t.payday.toDate(),t.month_count=Number(t.month_count),0===t.month_count?t.monthly_pay=t.amount:t.monthly_pay=Math.floor(t.amount/t.month_count);var n=JSON.parse(localStorage.getItem("user"));t.user=n._id,he(t).then(function(e){if(201===e.status){var n=a.state.payments;n.push(t),J.a.success({message:"\xa1Exitoso!",description:"El pago se ha creado"}),a.setState({payments:n,visible:!1})}else W.a.error("Hubo un error")}).catch(function(e){J.a.error({message:"Ooops!",description:e})})}})},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.deletePayment=function(e){ge(e).then(function(t){if(200===t.status){var n=a.state.payments,r=n.map(function(e){return e._id}).indexOf(e);n.splice(r,1),J.a.success({message:"\xa1Exitoso!",description:"El pago se ha eliminado"}),a.setState({payments:n})}}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.payments,c=e.dataLoaded,l=this.handleCancel,o=this.deletePayment,s=this.props.form.getFieldDecorator;return r.a.createElement("div",{style:{padding:12}},r.a.createElement("h2",null,"Pagos recurrentes:"),r.a.createElement("p",null,"En esta secci\xf3n podr\xe1s ver y agregar pagos recurrentes a tu cuenta. ",r.a.createElement("strong",null,"Por ejemplo: "),"Pagos a meses, pago de servicios, etc."),r.a.createElement("div",{className:"d-flex fw",style:{overflowY:"scroll"}},c?a.map(function(e,t){return r.a.createElement(H.a,{style:{width:380,margin:8},actions:[r.a.createElement(g.a,{type:"delete",onClick:function(){return o(e._id)}})],key:t},r.a.createElement(Ce,{avatar:r.a.createElement(U.a,{size:64,src:"https://images.vexels.com/media/users/3/143188/isolated/preview/5f44f3160a09b51b4fa4634ecdff62dd-money-icon-by-vexels.png"}),title:e.paymentName,description:e.description}),r.a.createElement("div",{style:{padding:20}},r.a.createElement("p",null,r.a.createElement("strong",null,"Cantidad:")," $",e.amount," MXN ",r.a.createElement("br",null),0===e.month_count?r.a.createElement("strong",null,"Pago recurrente "):r.a.createElement(n.Fragment,null,r.a.createElement("strong",null,"Numero de pagos: ")," ",e.month_count," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Fecha de finalizaci\xf3n: ")," ",me()(e.end_date).format("DD MMM YYYY")))))}):r.a.createElement("div",null,"no hay")),r.a.createElement("div",{className:"float-button"},r.a.createElement(N.a,{type:"primary",onClick:this.showModal,icon:"plus-circle",size:"large"},"Agregar pago ")),r.a.createElement(Ne.a,{title:"Agregar un nuevo pago recurrente",visible:t,onCancel:l,footer:[r.a.createElement(N.a,{key:"back",onClick:this.handleCancel},"Cancelar")]},r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a.Item,{label:"Nombre del pago:"},s("paymentName",{rules:[{required:!0,message:"Ingresa un nombre.."}]})(r.a.createElement(j.a,{prefix:r.a.createElement(g.a,{type:"edit",style:{color:"rgba(0,0,0,.25)"}}),name:"paymentName",placeholder:"Nombre del pago"}))),r.a.createElement(k.a.Item,{label:"Descripci\xf3n del pago:"},s("description",{rules:[{required:!1,message:"Escribe una peque\xf1a descripci\xf3n"}]})(r.a.createElement(j.a,{prefix:r.a.createElement(g.a,{type:"align-left",style:{color:"rgba(0,0,0,.25)"}}),name:"paymentName",placeholder:"Descripci\xf3n"}))),r.a.createElement(k.a.Item,{label:"Fecha de compra o d\xeda de cobro: "},s("payday",{rules:[{required:!0,message:"La fecha de compra o d\xeda de cobro no pueden estar vac\xeda"}]})(r.a.createElement(Oe.a,{placeholder:"Seleciona una fecha..",style:{width:"100%"},format:"DD MMM YYYY"}))),r.a.createElement(Ie,{label:"Tipo de cobro: "},s("month_count",{rules:[{required:!0}],initialValue:"0"})(r.a.createElement(je.a,{style:{width:"100%"}},r.a.createElement(_e,{label:"Hasta su cancelaci\xf3n"},r.a.createElement(Me,{value:"0"},"Pago recurrente")),r.a.createElement(_e,{label:"Pago por plazo"},r.a.createElement(Me,{value:"3"},"3 meses"),r.a.createElement(Me,{value:"6"},"6 meses"),r.a.createElement(Me,{value:"9"},"9 meses"),r.a.createElement(Me,{value:"12"},"12 meses"))))),r.a.createElement(Ie,{label:"Cantidad: ",style:{width:"100%"}},s("amount",{rules:[{required:!0}]})(r.a.createElement(Se.a,{style:{width:"100%"},formatter:function(e){return"$ ".concat(e)},min:1,name:"amount",placeholder:"Cantidad"}))),r.a.createElement(N.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Agregar"))))}}]),t}(n.Component),Le=k.a.create({name:"add_payment"})(De),Ae=function(e){var t=e.component,a=e.layout,n=Object(d.a)(e,["component","layout"]);return r.a.createElement(p.a,Object.assign({},n,{render:function(e){return r.a.createElement(a,null," ",r.a.createElement(t,e)," ")}}))},Ye=function(){return r.a.createElement(h.a,null,r.a.createElement(Ae,{exact:!0,path:"/",layout:b,component:x}),r.a.createElement(Ae,{exact:!0,path:"/login",layout:b,component:$}),r.a.createElement(Ae,{exact:!0,path:"/signup",layout:b,component:$}),r.a.createElement(Ae,{path:"/dashboard",layout:te,component:be}),r.a.createElement(Ae,{exact:!0,path:"/accounts",layout:te,component:ve}),r.a.createElement(Ae,{exact:!0,path:"/accounts/:id",layout:te,component:ke}),r.a.createElement(Ae,{exact:!0,path:"/payments",layout:te,component:Le}))},ze=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ye,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(492);var Pe=a(511);a(494);l.a.render(r.a.createElement(function(){return r.a.createElement(Pe.a,null,r.a.createElement(ze,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[229,2,1]]]);
//# sourceMappingURL=main.c8d32edc.chunk.js.map